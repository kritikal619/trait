<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="FC모바일 특성 재료 관련 정보를 제공하는 사이트입니다.">
    <meta name="keywords" content="FC모바일, 특성 재료, 선수 특성, 오버롤, FC Trait, 넥슨, 게임 정보, 라브, 피파모바일, 피모, 엪모, 특성, 라인 브레이커, 예감, 예리한 감아차기, 패마, 패스 마스터, 두활, 두번째 활력, 강뚝, 강력한 헤더, 선수">
    <meta name="author" content="해리지팡이">
    <meta property="title" content="FC모바일 특성 재료 정보">
    <meta property="description" content="FC모바일 특성 재료와 관련된 모든 정보를 제공합니다!">
    <meta property="image" content="Favicon.png">
    <meta property="url" content="https://kritikal619.github.io/trait/" />
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="Favicon.png"/>
    <meta name="google-site-verification" content="mI4G1pPTEE7nMyQzFuWm0l5_AHAQiODcfXhTXQ2YMAc" />
    <meta name="naver-site-verification" content="47688a76eda92be8c9ba8435f8b91c9598a1bfc0" />
</head>
<body>
    <h1 id="heading">FC모바일 특성 재료 정보</h1>
    <h4 id="update">최근 업데이트 24.11.23 (최신 정보 업데이트)</h4>
    <h4 id="info">공지: 검색 시 쪽수별로 검색해 주시기 바랍니다</h4>
    <h4 id="info2">검색 시 올바른 명칭을 사용해 주세요 (강뚝 X 강력한 헤더 O)</h4>
 
    <A href="http://fcevol.kro.kr/"> 추가 정보: 진화 시뮬레이션을 하고 싶다면? </A>
    <p>
    <A href="https://indvel.github.io/fcmsquad/"> 스쿼드메이커를 사용하고 싶다면? </A>
    <p>

    <div id="search-container">
        <input type="text" id="search-input" placeholder="선수, 오버롤, 시즌, 특성명 검색" onkeyup="filterTable()">
    </div>
    <div id="table-container">
        <!-- JavaScript로 동적 데이터 추가 -->
    </div>
    <div id="pagination"></div>
    </div>
    <script src="script.js"></script>
    <h4 id="info3">해리지팡이, 크리티칼</h4>
    <h4 id="info4">Data based on NEXON</h4>

    <script>
        if ('serviceWorker' in navigator && 'PushManager' in window) {
          navigator.serviceWorker.register('/sw.js')
          .then(function(swReg) {
            console.log('Service Worker is registered', swReg);
    
            return swReg.pushManager.getSubscription()
            .then(function(subscription) {
              if (subscription === null) {
                return swReg.pushManager.subscribe({
                  userVisibleOnly: true,
                  applicationServerKey: urlB64ToUint8Array('BBSGXZN75_LHd1luWhNeXfSIgksvros8Sw5YUqvKuDn1tqRgF_WGKL4_4cW37UQ3VDofHBx5pgxsHm5xvv5NgZ4')
                });
              } else {
                return subscription;
              }
            });
          })
          .then(function(subscription) {
            console.log('User is subscribed:', subscription);
            scheduleDailyNotification(subscription);
          })
          .catch(function(error) {
            console.error('Service Worker Error', error);
          });
        }
    
        function urlB64ToUint8Array(base64String) {
          const padding = '='.repeat((4 - base64String.length % 4) % 4);
          const base64 = (base64String + padding)
            .replace(/\-/g, '+')
            .replace(/_/g, '/');
          
          const rawData = window.atob(base64);
          const outputArray = new Uint8Array(rawData.length);
          
          for (let i = 0; i < rawData.length; ++i) {
            outputArray[i] = rawData.charCodeAt(i);
          }
          return outputArray;
        }
    
        function scheduleDailyNotification(subscription) {
          function calculateTimeout() {
            const now = new Date();
            const target = new Date();
            target.setHours(4, 15, 0, 0); // 시간
    
            if (now > target) {
              target.setDate(target.getDate() + 1); // 다음 날로 설정
            }
    
            return target - now;
          }
    
          function sendNotification() {
            const payload = JSON.stringify({
              title: 'FC모바일 특성 정보!',
              body: '필요한 특성이 있으신가요? 특성을 달아주세요!',
              icon: 'Favicon.png',
            
            });
    
            navigator.serviceWorker.ready.then(function(swRegistration) {
              swRegistration.showNotification('FC모바일 특성 정보!', {
                body: '필요한 특성이 있으신가요? 특성을 달아주세요!',
                icon: 'Favicon.png',
                
              });
            });
    
            // 다음 날 알림 설정
            setTimeout(sendNotification, 24 * 60 * 60 * 1000); // 24시간 후 다시 실행
          }
    
          // 초기 타이머 설정
          setTimeout(sendNotification, calculateTimeout());
        }
      </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "FC모바일 특성 재료",
      "description": "FC모바일 특성 재료 관련 정보를 제공하는 FCTrait 사이트입니다.",
      "url": "https://fctrait.kro.kr"
    }
    </script>
</body>
</html>
